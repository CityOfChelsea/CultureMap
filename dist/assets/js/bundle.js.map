{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/js/config.js","webpack:///./src/assets/js/legend.js","webpack:///./src/assets/js/cultural_assets.js","webpack:///./src/assets/js/historic.js","webpack:///./src/assets/js/modal.js","webpack:///./src/assets/js/typeahead.js","webpack:///./src/assets/js/sidebar.js","webpack:///./src/assets/js/goog.js","webpack:///./src/assets/js/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","1","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","base_map_URL","feature_layer_URL","historic_district_URL","votes_url","asset_categories","Architecture","Landmark or monument","Public art","Creative industry","Park or open space","Cultural facility","Food","Programming or event","palette","architecture","landmark","public-art","creative-industry","food","cultural-facility","park","programming","category_field","iconURL","iconExtension","zoomDisableCluster","asset_subcategories","highlightStyle","stroke","color","weight","opacity","fillColor","fillOpacity","radius","category_data","category_map","category","category_safe","iconPath","categoryString","$","append","subcategoryString","subcategories","forEach","subcategory","index","addSubcategories","indexOf","last","toLowerCase","clusterFunction","cluster","count","getChildCount","digits","L","divIcon","html","className","iconSize","invert_dict","dict","asset_categories_reversed","label_friendly_layers","layers","inverted","filterByCategory","feature","layer","cat","properties","TAB_NAME","clearOnClick","console","log","isEmptyObject","clearLayers","formatPopup","features","content","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","iterator","next","done","err","return","toggle","id","msg1","msg2","mymap","hasLayer","removeLayer","addLayer","setupPopup","latlng","popup","setLatLng","setContent","openOn","addData","once","on","node","title","website","removeClass","addClass","NAME","WEBSITE","show","attr","addWebsiteLink","hide","service_url","objectId","request_url","modal_content","DESC1","formatContent","one","ev","featureService","url","options","query","where","run","error","featureCollection","params","geometry","attributes","ASSET_ID","esri","post","response","castVote","voteFeatureService","Promise","resolve","reject","urls","attachmentInfos","map","el","then","pic_urls","carousel_content","pic_url","PIC_URL","formatPics","catch","modal","_config","featureLayer","search","LAYER","_latlng","flyTo","animate","duration","highlight","circle","fill","addTo","setTimeout","fire","remove","sync","layerGroups","group","empty","_layers","_layer","getBounds","contains","getLatLng","stamp","lat","lng","click","zoom","_ret","hover","switchLangLink","ready","Cookies","switchGoogleTransCookie","set","location","reload","cfg","goog","sidebar","typeahead","historic","culture","legend","tooltip","Control","Zoom","position","setView","tileLayer","maxZoom","geoJson","historic_highlight","historic_districts","_loop","icon","iconUrl","catClusterFunction","markers","markerClusterGroup","layerSupport","iconCreateFunction","disableClusteringAtZoom","mylayer","geoJSON","pointToLayer","geojson","marker","onEachFeature","filter","asset_categories_inverted","palette_readable","control","closest","css","all_assets","clearHighlight","input","minLength","order","display","source","searchOnFocus","callback","onClick","onSubmit","debug","document","e","off","parseInt","this","circleMarker"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([12,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export const base_map_URL = 'https://api.mapbox.com/styles/v1/tohorner/cjhijn5ba1zon2rpelkgflt7y/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoidG9ob3JuZXIiLCJhIjoiY2l6NGFoeXIxMDRscDMycGd2dzVzZTg3NyJ9.Vfe_mGvZ-mHldkO0x2gXEw';\nexport const feature_layer_URL = 'https://services9.arcgis.com/diuwWhOq89A0FdTw/arcgis/rest/services/Core_Feature_Service_View/FeatureServer/0';\nexport const historic_district_URL = 'https://services9.arcgis.com/diuwWhOq89A0FdTw/arcgis/rest/services/NRDIS_shapefile/FeatureServer/0'\nexport const votes_url = 'https://services3.arcgis.com/U4SbXhYNLOfN36SP/arcgis/rest/services/votes/FeatureServer/0';\n/**\n * Dictionary that maps label-friendly asset Categories\n * to HTML and CSS-friendly asset-categories\n * @type {Object}\n */\nexport const asset_categories = {\n  'Architecture': 'architecture',\n  'Landmark or monument': 'landmark',\n  'Public art': 'public-art',\n  'Creative industry': 'creative-industry',\n  'Park or open space': 'park',\n  'Cultural facility': 'cultural-facility',\n  'Food': 'food',\n  'Programming or event': 'programming'\n};\n\nexport const palette = {\n  \"architecture\": \"#2a3e50\", // Dark blue\n  \"landmark\": \"#8C2A23\", // Sienna\n  \"public-art\": \"#fc4349\", // Pink\n  \"creative-industry\": \"#6dbcdb\", // Sky blue\n  \"food\": \"#2E6E24\", // olive\n  \"cultural-facility\": \"#ffb733\", // Gold\n  \"park\": \"#1a9481\", // Teal\n  \"programming\": \"#62358C\" // Purple\n};\nexport const category_field = 'TAB_NAME';\n\n/**\n * Relative path where icon png's reside.\n * @type {String}\n */\nexport const iconURL = './assets/icon/0.5x/';\nexport const iconExtension = '@0.5x.png';\nexport const zoomDisableCluster = 18;\n\nexport const asset_subcategories = {\n  'Architecture': ['Historic buildings', 'Significant restorations', 'Contemporary buildings', 'Notable design details'],\n  'Landmark or monument': ['Heritage sites', 'Landmarks', 'Monuments', 'Cemeteries'],\n  'Public art': ['Murals', 'Street art', 'Sculptures', 'Art installations'],\n  'Creative industry': ['Creative studios', 'Practice spaces', 'Creative businesses', 'Coworking facilities', 'Art supplies', 'Artist live/work space'],\n  'Park or open space': ['Parks', 'Playgrounds', 'Natural spaces', 'Scenic areas', 'Community gardens'],\n  'Cultural facility': ['Performance spaces', 'Exhibitions spaces', 'Places of worship', 'Social clubs'],\n  'Food': ['Restaurants', 'Bars/breweries', 'Commercial kitchens', 'Urban agriculture'],\n  'Programming or event': ['Schools', 'Libraries', 'Educational programming', 'Festivals', 'Meeting halls', 'Other notable events']\n}\n\nexport const highlightStyle = {\n  stroke: true,\n  color: \"#F25C05\",\n  weight: 5,\n  opacity: 0.7,\n  fillColor: \"#F25C05\",\n  fillOpacity: 0.3,\n  radius: 15\n};\n","export const addSubcategories = function(subcategory, index, subcategories) {\n  if (subcategories.indexOf(subcategory) == 0) {\n    $('.subcategory-p').last().append(`${subcategory}, `)\n  } else if (subcategories.indexOf(subcategory) < subcategories.length - 1) {\n    $('.subcategory-p').last().append(`${subcategory}, `.toLowerCase())\n  } else {\n    $('.subcategory-p').last().append(`${subcategory}`.toLowerCase());\n  }\n}\n\nexport function create(category_data, category_map) {\n  for (let category in category_data) {\n\n    //Get version of category label wo/spaces\n    let category_safe = category_map[category];\n    let iconPath = `./assets/icon/1x/${category_safe}.png`;\n    let iconWidth = '80%'\n    let categoryString = `<div class=\"row\"><div class=\"col-1 px-0 ml-2\"><img src=${iconPath} width=${iconWidth}></div><div class=\"col-9 px-1\"><h5>${category}</h5></div></div>`\n    let subcategoryString = `<div class=\"row subcategory-row\"><div class=\"col-1 px-0 ml-2\"></div><div class=\"col-9 px-1 subcategory-column\"><p class=\"subcategory-p\"></p></div></div>`\n\n    $('#legendTable').append(categoryString + subcategoryString)\n\n    const subcategories = category_data[category];\n\n    subcategories.forEach((subcategory, index, subcategories) =>\n      addSubcategories(subcategory, index, subcategories));\n  }\n}\n","/**\n * Closure for assigning classes to icons according\n * to asset category\n * @param  {string} category [description]\n * @return {function}          [description]\n */\nexport function clusterFunction(category) {\n  return function(cluster) {\n    // get the number of items in the cluster\n    var count = cluster.getChildCount();\n\n    // figure out how many digits long the number is\n    var digits = (count + '').length;\n\n    // return a new L.DivIcon with our classes so we can\n    // style them with CSS. Take a look at the CSS in\n    // the <head> to see these styles. You have to set\n    // iconSize to null if you want to use CSS to set the\n    // width and height.\n    return new L.divIcon({\n      html: count,\n      className: 'cluster digits-' + digits + \"-\" + category,\n      iconSize: null\n    });\n  }\n};\n\n/**\n * Exchanges dictionary keys for values\n * @param  {dictionary} dict input dicitonary\n * @return {dictionary}      reversed dicitonary\n */\nexport function invert_dict(dict){\n  let asset_categories_reversed = {};\n  for (let key in dict) {\n    asset_categories_reversed[dict[key]] = key\n  }\n  return asset_categories_reversed;\n}\n\n/**\n * Convert keys in an dictionary of Leaflet layers\n * from HTML-safe strings to readable strings\n * @param  {[type]} layers   Dictionary of layers with HTML-safe keys\n * @param  {[type]} inverted Dictionary that maps HTML-safe to readable keys\n * @return {[type]}          Dictionary of layers with readable keys\n */\nexport function label_friendly_layers(layers, inverted){\n  let label_friendly_layers = {};\n  for (let key in layers) {\n    label_friendly_layers[inverted[key]] = layers[key]\n  };\n  return label_friendly_layers;\n}\n\nexport function filterByCategory(feature, layer, cat){\n  if (feature.properties.TAB_NAME == cat) {\n    return true;\n  } else {\n    return false;\n  }\n}\n","import 'leaflet';\n\nexport function clearOnClick(layer){\n  console.log(layer);\n  if (!$.isEmptyObject(layer)) {\n    layer.clearLayers()\n  }\n}\n\nexport function formatPopup(features){\n  let content;\n  if (features.length > 1) {\n    content = `<h5>Historic districts:</h5>`\n    for (let feature of features) {\n      let num = features.indexOf(feature) + 1;\n      content += `<p>(${num}) ${feature.properties['HISTORIC_N']}</p>`;\n    }\n  } else {\n    let feature = features[0]\n    content = `<h5>Historic district:</h5><p>${feature.properties['HISTORIC_N']}</p>`;\n  }\n  return content;\n}\n\nexport function toggle(layer, id, msg1, msg2, mymap) {\n  if (mymap.hasLayer(layer)) {\n    $(id).html(msg1)\n    mymap.removeLayer(layer)\n  } else {\n    mymap.addLayer(layer)\n    $(id).html(msg2)\n  }\n}\n\nexport function setupPopup(features, latlng, layer, mymap){\n\n  const popup = L.popup();\n\n  let content = formatPopup(features);\n  popup.setLatLng(latlng);\n  popup.setContent(content);\n  popup.openOn(mymap);\n\n  layer.addData(features);\n  mymap.once('click popupclose', () => {\n    clearOnClick(layer);\n  });\n}\n","import {\n  feature_layer_URL,\n  votes_url\n} from './config.js';\nimport 'leaflet'\nL.esri = require('esri-leaflet');\n\nconst voteFeatureService = L.esri.featureLayer({\n  url: votes_url\n})\n\nfunction formatContent(feature) {\n  let modal_content = '';\n\n  if (feature.properties.TAB_NAME) {\n    modal_content += `<p>Category: <i>${feature.properties.TAB_NAME}</i></p>`\n  }\n  if (feature.properties.DESC1) {\n    modal_content += feature.properties.DESC1\n  }\n  return modal_content\n}\n\nfunction formatPics(feature, pic_urls) {\n\n  let carousel_content = `<div class=\"carousel-inner\">`;\n  if (pic_urls.length > 1) {\n    pic_urls.forEach((pic_url, i) => {\n      if (i == 0) {\n        carousel_content += `<div class=\"carousel-item active\"><img class=\"d-block w-100\" src=\"${pic_url}\" alt=\"\"></div>`\n      } else {\n        carousel_content += `<div class=\"carousel-item\"><img class=\"d-block w-100\" src=\"${pic_url}\" alt=\"\"></div>`\n      }\n    })\n    carousel_content += `</div>` // close of carousel inner\n    carousel_content += `  <a class=\"carousel-control-prev\" href=\"#featureCarousel\" role=\"button\" data-slide=\"prev\">\n    <span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\n    <span class=\"sr-only\">Previous</span>\n  </a>\n  <a class=\"carousel-control-next\" href=\"#featureCarousel\" role=\"button\" data-slide=\"next\">\n    <span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\n    <span class=\"sr-only\">Next</span>\n  </a>`\n  } else if (pic_urls.length == 1) {\n    carousel_content += `<img id=\"featureModalPic\" class=\"mb-3\" src=\"${pic_urls[0]}\"></div>`\n  } else {\n    if (feature.properties.PIC_URL) {\n      carousel_content += `<img id=\"featureModalPic\" class=\"mb-3\" src=\"${feature.properties.PIC_URL}\"></div>`\n    }\n  }\n  return carousel_content;\n}\n\n/**\n * Given a feature service url and a feature's Object ID\n * will return a Promise that resolves to an array of all\n * attached pics, or an empty array if no pics are attached.\n * @param  {string} service_url [description]\n * @param  {string} objectId    [description]\n * @return {Promise}             [description]\n */\nfunction fetchAttachPicUrls(service_url, objectId) {\n  const request_url = `${service_url}/${objectId}/attachments`;\n  return new Promise((resolve, reject) => {\n    L.esri.get(request_url, {}, (error, response) => {\n      if (error) {\n        reject(error);\n      } else {\n        const urls = response.attachmentInfos.map(el => `${request_url}/${el.id}`)\n        resolve(urls);\n      }\n    })\n  })\n}\n\nfunction castVote(featureService, feature) {\n\n  const url = featureService.options.url\n  console.log(featureService);\n  featureService.query()\n    .where(`ASSET_ID = '${feature.id}'`)\n    .run((error, featureCollection) => {\n      if (error) {\n        console.log(error)\n      } else {\n\n        const params = {\n          \"features\": {\n            \"geometry\": null,\n            \"attributes\": {\n              \"ASSET_ID\": feature.id,\n              \"NAME\": feature.properties.NAME,\n            }\n          }\n        }\n\n        L.esri.post(`${url}/addFeatures`, params, function(error, response) {\n          if (error) {\n            console.log(error);\n          } else {\n            console.log(response);\n          }\n        });\n      }\n    });\n}\n\nfunction addTitle(title) {\n  $(\"#featureModal .modal-title\").html(title);\n}\n\nfunction addWebsiteLink(website) {\n  $(\"#learnMore\").attr(\"href\", website);\n}\n\nfunction toggleLearnMore(website) {\n  if (website) {\n    $('#learnMore').show()\n    addWebsiteLink(website)\n  } else {\n    $('#learnMore').hide();\n  }\n}\n\nfunction addContent(content) {\n  $(\"#featureModal #modalBodyContent\").html(content)\n}\n\nfunction colorizeBtn(node) {\n  $(node).removeClass('btn-light');\n  $(node).addClass('btn-success');\n}\n\nfunction resetLikeBtn(node) {\n  $(node).removeClass('btn-success');\n  $(node).addClass('btn-light');\n}\n\nfunction removeLikeTooltip(node) {\n  $(node).tooltip('hide');\n  $(node).tooltip('disable');\n}\n\nfunction resetLikeTooltip(node) {\n  $(node).tooltip('enable');\n}\n\nexport function create(feature, layer) {\n\n  feature.layer = layer;\n  layer.on('click', () => {\n\n    resetLikeBtn('#votes');\n    // resetLikeTooltip('#votes')\n\n    //Add modal content\n    addTitle(feature.properties.NAME);\n    toggleLearnMore(feature.properties.WEBSITE);\n    let modal_content = formatContent(feature);\n    addContent(modal_content);\n\n\n\n    //When the votes button is clicked, cast a vote\n    $('#votes').one('click', ev => {\n      castVote(voteFeatureService, feature);\n      colorizeBtn('#votes');\n    })\n\n    fetchAttachPicUrls(feature_layer_URL, feature.id)\n      .then(pic_urls => {\n        let carousel_content = formatPics(feature, pic_urls)\n        $('#featureCarousel').html(carousel_content)\n      })\n      .catch(err => console.log(err))\n\n    //Show the modal\n    $(\"#featureModal\").modal(\"show\");\n  })\n}\n","export function search(node, query, result, mymap, zoomDisableCluster) {\n    console.log('query', query);\n    let layer = result.LAYER\n    let latlng = layer._latlng\n    mymap.flyTo(latlng, zoomDisableCluster, {\n      animate: true,\n      duration: 1\n    });\n\n    let highlight = L.circle(latlng, {\n      radius: 10,\n      weight: 5,\n      color: '#ffc107',\n      fill: false\n    }).addTo(mymap);\n\n\n    mymap.once(\"moveend\", () => {\n      window.setTimeout(() => {\n        layer.fire(\"click\")\n      }, 450);\n    });\n\n    $('#featureModal').on('hidden.bs.modal', () => {\n      if (highlight) {\n        highlight.remove()\n      }\n    })\n\n}\n","/**\n * Gets layers currently displayed on map\n * @param  {L.map} map\n * @param  {dictionary} layerGroups A dictionary of L.markerClusterGroup values\n * @return {array}             Array of displayed layers\n */\nexport function sync(mymap, layerGroups) {\n\n  let currentlyDisplayed = [];\n\n  $(\"#currently-displayed\").empty();\n\n  for (let group in layerGroups) {\n    if (mymap.hasLayer(layerGroups[group])) {\n      let layers = layerGroups[group]._layers\n      for (let _layer in layers) {\n        let layer = layers[_layer];\n        if (mymap.getBounds().contains(layer.getLatLng())) {\n          $('#currently-displayed').append(`<a id=${L.stamp(layer)} class=\"feature-row list-group-item bg-light px-0\" lat=\"${layer.getLatLng().lat}\" lng=\"${layer.getLatLng().lng}\">${layer.feature.properties.NAME}</a>`)\n          // $('#currently-displayed tbody').append(`<tr id=${L.stamp(layer)} class=\"feature-row\" lat=\"${layer.getLatLng().lat}\" lng=\"${layer.getLatLng().lng}\"><td>${layer.feature.properties.NAME}</td></tr`)\n        }\n      }\n    }\n  }\n}\n\nexport function click(id, mymap, layerGroups, zoom){\n  for (let group in layerGroups) {\n    if (mymap.hasLayer(layerGroups[group])) {\n      let layers = layerGroups[group]._layers\n      if (id in layers){\n        let layer = layers[id];\n        let latlng = layer.getLatLng()\n\n        mymap.once(\"moveend\", () => {\n          layer.fire(\"click\");\n        })\n        mymap.flyTo(latlng, zoom);\n\n        break;\n      }\n    }\n  }\n}\n\nexport function hover(){\n\n}\n","/**\n * Switches the language link in the navbar,\n * according to google translate cookie\n * @return null\n */\nexport function switchLangLink() {\n  $('document').ready(() => {\n    if (Cookies.get('googtrans') == '/en/en') {\n      $(\"#languageLink>button>span\").html(\"EspaÃ±ol\")\n    } else {\n      $(\"#languageLink>button>span\").html(\"English\")\n    }\n  })\n}\n\n/**\n * Sets the google translate cookie to English or Spanish\n * @return null\n */\nexport function switchGoogleTransCookie() {\n  $('#languageLink').on('click', () => {\n\n    if (Cookies.get('googtrans') == '/en/en') {\n      Cookies.set('googtrans', '/en/es');\n      location.reload();\n    } else {\n      Cookies.set('googtrans', '/en/en');\n      location.reload();\n    }\n\n  })\n}\n","//External dependencies\nimport 'leaflet'\nL.esri = require('esri-leaflet');\nimport 'leaflet.markercluster';\nimport 'leaflet.markercluster.layersupport';\n\n//App modules\nimport * as cfg from './config.js';\nimport * as goog from './goog.js';\nimport * as sidebar from './sidebar.js';\nimport * as typeahead from './typeahead.js'\nimport * as modal from './modal.js';\nimport * as historic from './historic.js';\nimport * as culture from './cultural_assets.js';\nimport * as legend from './legend.js';\n\n//Enable bootstrap tooltips\n$(function() {\n  $('[data-toggle=\"tooltip\"]').tooltip()\n})\n\n///////////////\n//Set up map //\n///////////////\n\n// Initialize the Map\n\n// Something funky going on with zoom control in\n// Lower right hand corner. Added zoom control at map initailization instead.\n// let mymap = L.map('map', {\n//   zoomControl: true,\n//   scrollWheelZoom: true,\n//   doubleClickZoom: true\n// })\n\n//Add zoom control\nlet zoom = new L.Control.Zoom({\n  position: 'bottomright'\n}).addTo(mymap);\n\n//Initial map view\nmymap.setView([42.39, -71.035], 16);\n\n// Add the basemap\nconst basemap = L.tileLayer(cfg.base_map_URL, {\n  maxZoom: 20\n}).addTo(mymap);\n\n//Add highlight layer\nlet highlight = L.geoJson(null);\nhighlight.addTo(mymap);\n\n///////////////////////////////////\n//Historic district functionality//\n///////////////////////////////////\n\n//Add historic highlight layer\nlet historic_highlight = L.geoJson(null, {\n  color: '#00FFFF',\n  weight: 5\n}).addTo(mymap);\n\n//Load the historic district feature layer\nlet historic_districts = L.esri.featureLayer({\n  url: cfg.historic_district_URL\n})\n\n//Set up popup for historic districts. (A bit more complex than usual popup because we'd like to display info for all overlapping historic districts.)\nhistoric_districts.on(\"click\", (ev) => {\n  let latlng = ev['latlng'];\n  L.esri.query({\n    url: cfg.historic_district_URL\n  }).contains(latlng).run((error, featureCollection, response) => {\n    let features = response.features;\n    historic.setupPopup(features, latlng, historic_highlight, mymap)\n  })\n})\n\n//Toggles show/hide in menu\n$('#historicDistricts').on('click', () => {\n  historic.toggle(historic_districts, '#historicDistricts', 'Show historic districts', 'Hide historic districts', mymap)\n})\n\n//////////////////////////////////\n//Cultural asset database query //\n//////////////////////////////////\n\n// Dictionary for storing all layers.\nlet layers = {};\n\n//Query all approved cultural assets,\n//i.e. where STATUS = 1, then create Layers\n//from the resulting geoJSON, by cultural asset cateogry\nlet query = L.esri.query({\n  url: cfg.feature_layer_URL\n}).where(\"STATUS = 1\").run(function(error, featureCollection, response) {\n\n  //Loop through all the asset categories,\n  //creating a layer for each one.\n  for (let cat in cfg.asset_categories) {\n\n    //Icons for non-clustered cultural assets\n    let icon = L.icon({\n      iconUrl: cfg.iconURL + cfg.asset_categories[cat] + cfg.iconExtension,\n      iconSize: [15, 15]\n    });\n\n    // Function that defines how the icons\n    // representing clusters are created\n    let catClusterFunction = culture.clusterFunction(cfg.asset_categories[cat])\n\n    // Create an empty cluster marker group\n    let markers = L.markerClusterGroup.layerSupport({\n      iconCreateFunction: catClusterFunction,\n      disableClusteringAtZoom: cfg.zoomDisableCluster\n    });\n\n    // Create a layer, filtering for a single\n    // Asset category\n    let mylayer = L.geoJSON(response, {\n      pointToLayer: function(geojson, latlng) {\n        return L.marker(latlng, {\n          icon: icon\n        });\n      },\n      onEachFeature: (feature, layer) => modal.create(feature, layer),\n      filter: (feature, layer) => culture.filterByCategory(feature, layer, cat)\n    })\n\n    //Add the layer to the cluster group\n    markers.addLayer(mylayer)\n\n    //Add the cluster group to the map\n    mymap.addLayer(markers)\n\n    //Add the layer to the layer dictionary\n    layers[cfg.asset_categories[cat]] = markers;\n\n  } // End loop that creates layers\n\n  /***********Layers control***************/\n\n  // Swap out html-safe asset category labels for readable labels\n  let asset_categories_inverted = culture.invert_dict(cfg.asset_categories);\n  let label_friendly_layers = culture.label_friendly_layers(layers, asset_categories_inverted);\n  let layer_widget = L.control.layers(null, label_friendly_layers).addTo(mymap);\n\n  //Adjust colors of layer layer_widget\n  let palette_readable = {}\n  for (let key in cfg.palette) {\n    palette_readable[asset_categories_inverted[key]] = cfg.palette[key]\n  }\n\n  for (let key in palette_readable) {\n    let selector_string = \"div.leaflet-control-layers-overlays span:contains('\" + key + \"')\"\n    $(selector_string).closest(\"div\").css(\"background-color\", palette_readable[key]);\n  }\n\n  //Parse asset data for search plugin\n  const all_assets = []\n  for (let feature of response.features) {\n    feature.properties.LAYER = feature.layer;\n    all_assets.push(feature.properties)\n  }\n\n  // Typeahead\n  $.typeahead({\n    input: '#assetSearch',\n    minLength: 1,\n    order: \"asc\",\n    display: \"NAME\",\n    source: {\n      data: all_assets\n    },\n    searchOnFocus: true,\n    callback: {\n      onClick: (node, query, result) => typeahead.search(node, query, result, mymap, cfg.zoomDisableCluster),\n      onSubmit: (node, query, result) => typeahead.search(node, query, result, mymap, cfg.zoomDisableCluster)\n    },\n    debug: true\n  });\n\n  //Sidebar\n\n  //Sync sidebar, listening for map move, zoom, or filtering layers\n  sidebar.sync(mymap, layers);\n  mymap.on('moveend zoomend overlayremove overlayadd', () => sidebar.sync(mymap, layers));\n\n  $(document).on(\"click\", \".feature-row\", function(e) {\n    $(document).off(\"mouseout\", \".feature-row\", clearHighlight);\n    sidebar.click(parseInt($(this).attr(\"id\"), 10),\n      mymap,\n      layers,\n      cfg.zoomDisableCluster);\n  });\n\n  if (!(\"ontouchstart\" in window)) {\n    $(document).on(\"mouseover\", \".feature-row\", function(e) {\n      highlight.clearLayers().addLayer(L.circleMarker([$(this).attr(\"lat\"), $(this).attr(\"lng\")], cfg.highlightStyle));\n    });\n  }\n\n  $(document).on(\"mouseout\", \".feature-row\", clearHighlight);\n\n  function clearHighlight() {\n    highlight.clearLayers();\n  }\n\n  ///////////////\n  //Map legend //\n  ///////////////\n\n  legend.create(cfg.asset_subcategories, cfg.asset_categories);\n\n}) // End query.run()\n\n/////////////////////////////////\n//Google Translat layer_widget //\n/////////////////////////////////\n\ngoog.switchLangLink();\ngoog.switchGoogleTransCookie();\n\n//////////////////////\n//Utility functions //\n//////////////////////\n"],"sourceRoot":""}